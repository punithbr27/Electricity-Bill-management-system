{% extends 'base.html' %}

{% block title %}Make Payment - EBMS{% endblock %}

{% block content %}
    <div class="gradient-card p-6 rounded-xl">
        <h2 class="text-2xl font-semibold mb-4">Record a Payment</h2>

            <form method="POST" class="space-y-4">
                <div>
                    <label class="block text-sm text-slate-900">Bill</label>
                    <select name="bill_id" required class="mt-1 w-full rounded-md bg-white p-2 border border-gray-300 text-slate-900">
                        <option value="">-- Select Bill --</option>
                        {% for b in bills %}
                            <option value="{{ b[0] }}">Bill ID: {{ b[0] }} (Remaining: ₹{{ b[2]|round(2) if b|length>2 else b[1]|round(2) }})</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label class="block text-sm text-slate-900">Amount Paid (₹)</label>
                    <input type="number" step="0.01" name="amount_paid" required class="mt-1 w-full rounded-md bg-white p-2 border border-gray-300 text-slate-900">
                </div>

                <div>
                    <label class="block text-sm text-slate-900">Payment Date</label>
                    <input type="date" name="payment_date" required class="mt-1 w-full rounded-md bg-white p-2 border border-gray-300 text-slate-900">
                </div>

                <div>
                    <label class="block text-sm text-slate-900">Payment Method</label>
                    <select name="payment_method" required class="mt-1 w-full rounded-md bg-white p-2 border border-gray-300 text-slate-900">
                        <option value="">-- Select Method --</option>
                        <option value="CASH">Cash</option>
                        <option value="CREDIT_CARD">Credit Card</option>
                        <option value="DEBIT_CARD">Debit Card</option>
                        <option value="ONLINE">Online Transfer</option>
                    </select>
                </div>

                <div class="flex items-center gap-3">
                    <button type="submit" class="px-4 py-2 bg-emerald-500 rounded">Record Payment</button>
                    <a href="{{ url_for('dashboard') }}" class="px-4 py-2 bg-white/5 rounded">Back</a>
                </div>
            </form>
        </div>
        <div class="mt-6">
            <a href="{{ url_for('dashboard') }}" class="inline-block px-4 py-2 bg-slate-200 text-slate-900 rounded">Back to Dashboard</a>
        </div>
{% endblock %}